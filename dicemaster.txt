var targetNumber;//variable that stores the random generated number based on user preference
var yourDice1; // variable that stores the value of the user's first dice generated
var yourDice2; //variable that stores the value of the user's second dice generated
var computerDice1; //variable that stores the value of the computer's first dice generated
var computerDice2; //variable that stores the value of the computer's second dice generated
var yourRequiredNumber; //variable that holds the current number required by the player to win the game
var computerRequiredNumber;//variable that holds the current number required by the computer to win the game
var gameLimitInteger; //variabe that holds the number of rounds for a game session
var gameCounter = 0; //variable that holds the count for each round of game played
var yourWinCount = 0; //variable holds players win count;
var computerWinCount = 0; //variable holds computer win count;
//The playDM function loads the player preferences and enables the roll dice button
//for start of play



function playDM(){
	//variable holds the minimum of a range of numbers from which the random targer number is generated
	var min = document.getElementById("minPlay").value; 
	//variable holds the maximum of a range of numbers from which the random targer number is generated
	var max = document.getElementById("maxPlay").value; 
	var minInteger;
	var maxInteger;
	//validate if the min input is an integer greater than 2 - which is the minimum for each play
	if ((minInteger = parseInt(min)) && (min >= 2)){
		//validate if the max input is an integer greater than the minimum integer
		if ((maxInteger = parseInt(max)) && (max >= minInteger)){
			//gemerate a target number for game;
			targetNumber = Math.round(minInteger + (Math.random() * (maxInteger - minInteger)));
			//display the number in its position
			document.getElementById("scoreLabel").innerHTML = targetNumber;
			//set those values to the targetNumber and display appropriately
			yourRequiredNumber = targetNumber;
			computerRequiredNumber = targetNumber;
			document.getElementById("yourScoreLabel").innerHTML = yourRequiredNumber;
			document.getElementById("computerScoreLabel").innerHTML = computerRequiredNumber;
	
			//enable the roll dice button for play to start
			document.getElementById("rollBtn").disabled = false;	
			//disable the start button since game has started
			document.getElementById("startBtn").disabled = true;	
		} else {
			document.getElementById("errMsgMax").innerHTML = "Invalid Entry!";
		}//end validation for max value
	} else {
		document.getElementById("errMsgMin").innerHTML = "Invalid Entry!";
	}//end validation for min value;
	document.getElementById("output").innerHTML = "";
}

//function that plays the game by generating values each from the 2 dices per player and computer
//the values generated are subtracted from the target number to give a new target number; 
//if the target number is 1, the dice 2 is disabled since the least generated by 2 dices is a 2;
//if the target number, when subtracted from the required number is less than 0; the target number should not be decremented
//if the player or the computer first gets a target number equal to its required number - i.e 0; its a win
function rollDice(){	
		//roll the first dices for both
		yourDice1 = Math.floor(1 + (Math.random() * 6));
		//console.log("Your Dice 1 = " + yourDice1);
		
		computerDice1 = Math.floor(1 + (Math.random() * 6));
		//console.log("Computer Dice 1 = " + computerDice1);
		//first check if the required number is 1, in which case dice 2 is disabled; its value is set to 0
		if ((yourRequiredNumber == 1) || (computerRequiredNumber == 1)){
			if (yourRequiredNumber == 1){
				yourDice2 = 0;
			}
			if (computerRequiredNumber == 1){
				computerDice2 = 0;
			}		
			//call the displayImage function to display appropriate dice images for the numbers generated
			displayImage(yourDice1,document.getElementById("imgYourDice1"));		
			displayImage(yourDice2,document.getElementById("imgYourDice2"));			
			displayImage(computerDice1,document.getElementById("imgComputerDice1"));		
			displayImage(computerDice2,document.getElementById("imgComputerDice2"));
			
			//check if the player's targetNumber after decrementing is greater than zero, in which case the decrementing is allowed
			if ((yourRequiredNumber - (yourDice1 + yourDice2)) > 0){
				yourRequiredNumber -= (yourDice1 + yourDice2);
			} 
			if (((yourRequiredNumber - (yourDice1 + yourDice2)) == 0) &&((computerRequiredNumber - (computerDice1 + computerDice2)) == 0)){
			//call the displayImage function to display appropriate dice images for the numbers generated
			displayImage(yourDice1,document.getElementById("imgYourDice1"));		
			displayImage(yourDice2,document.getElementById("imgYourDice2"));			
			displayImage(computerDice1,document.getElementById("imgComputerDice1"));		
			displayImage(computerDice2,document.getElementById("imgComputerDice2"));
			}
			//else if the player's targetNumber is equal to 0, in which case player wins
			else if ((yourRequiredNumber - (yourDice1 + yourDice2)) == 0){
				//disable the rollDice button
				document.getElementById("rollBtn").disabled = true;
				//enable the roll dice button for play to start
				document.getElementById("startBtn").disabled = false;
				//alert the winner
				document.getElementById("output").innerHTML = "YOU WIN THIS ROUND";
				gameCounter++;
				yourWinCount++;
				//increment gameCounter by 1 only after checking that the maximum number of games is not exceeded
				if (gameCounter == gameLimitInteger){
					if (yourWinCount > computerWinCount){
						document.getElementById("winnerText").innerHTML = "YOU WON THE GAME";
					} else if (yourWinCount < computerWinCount){
						document.getElementById("winnerText").innerHTML = "THE COMPUTER WON THE GAME";
					} else {
						document.getElementById("winnerText").innerHTML = "ITS A DRAW";
					}
					document.getElementById("startBtn").disabled = true;
					gameCounter = 0;
				} 
				document.getElementById("yourTally").innerHTML = yourWinCount;
				document.getElementById("computerTally").innerHTML = computerWinCount;
				console.log("Current Game Limit: " + gameLimitInteger);
				console.log("Current Game Counter: " + gameCounter);
				console.log("Current Your Win Counter: " + yourWinCount);
				console.log("Current Computer Win Counter: " + computerWinCount);
			}	
			//check if the computer's targetNumber after decrementing is greater than zero, in which case the decrementing is allowed
			if ((computerRequiredNumber - (computerDice1 + computerDice2)) > 0){
				computerRequiredNumber -= (computerDice1 + computerDice2);
			} 
			//else if the computer's targetNumber is equal to 0, in which case computer wins
			else if ((computerRequiredNumber - (computerDice1 + computerDice2)) == 0){
				//disable the rollDice button
				document.getElementById("rollBtn").disabled = true;
				//enable the roll dice button for play to start again
				document.getElementById("startBtn").disabled = false;
				//alert the winner
				document.getElementById("output").innerHTML = "COMPUTER WINS THIS ROUND";
				gameCounter++;
				computerWinCount++;
				//increment gameCounter by 1 only after checking that the maximum number of games is not exceeded
				if (gameCounter == gameLimitInteger){	
					if (yourWinCount > computerWinCount){
						document.getElementById("winnerText").innerHTML = "YOU WON THE GAME";
					} else if (yourWinCount < computerWinCount){
						document.getElementById("winnerText").innerHTML = "THE COMPUTER WON THE GAME";
					} else if (yourWinCount == computerWinCount){
						document.getElementById("winnerText").innerHTML = "ITS A DRAW";
					}
					document.getElementById("startBtn").disabled = true;
					gameCounter = 0;
				}
				document.getElementById("yourTally").innerHTML = yourWinCount;
				document.getElementById("computerTally").innerHTML = computerWinCount;
				console.log("Current Game Limit: " + gameLimitInteger);
				console.log("Current Game Counter: " + gameCounter);
				console.log("Current Your Win Counter: " + yourWinCount);
				console.log("Current Computer Win Counter: " + computerWinCount);
			}
			
		} //end check for required number = 1;
		//then check if the required number is less than zero, in which case, no decrementing is allowed
		else if((yourRequiredNumber < 0) || (computerRequiredNumber < 0)){
			displayImage(yourDice1,document.getElementById("imgYourDice1"));		
			displayImage(yourDice2,document.getElementById("imgYourDice2"));			
			displayImage(computerDice1,document.getElementById("imgComputerDice1"));		
			displayImage(computerDice2,document.getElementById("imgComputerDice2"));			
		}//end if/else check for required number less than 0
		//then if both conditions are not met, generate values for the dice 2s and decrement from the target number
		else {
			//generate values for the dice 2s					
			yourDice2 = Math.floor(1 + (Math.random() * 6));
			//console.log("Your Dice 2 = " + yourDice2);
			
			computerDice2 = Math.floor(1 + (Math.random() * 6));
			//console.log("Computer Dice 2 = " + computerDice2);
			//the display function displays the appropriate images
			displayImage(yourDice1,document.getElementById("imgYourDice1"));		
			displayImage(yourDice2,document.getElementById("imgYourDice2"));			
			displayImage(computerDice1,document.getElementById("imgComputerDice1"));		
			displayImage(computerDice2,document.getElementById("imgComputerDice2"));
			
			//check if the player's targetNumber after decrementing is greater than zero, in which case the decrementing is allowed
			if ((yourRequiredNumber - (yourDice1 + yourDice2)) > 0){
				yourRequiredNumber -= (yourDice1 + yourDice2);
			} 
			if (((yourRequiredNumber - (yourDice1 + yourDice2)) == 0) &&((computerRequiredNumber - (computerDice1 + computerDice2)) == 0)){
			//call the displayImage function to display appropriate dice images for the numbers generated
			displayImage(yourDice1,document.getElementById("imgYourDice1"));		
			displayImage(yourDice2,document.getElementById("imgYourDice2"));			
			displayImage(computerDice1,document.getElementById("imgComputerDice1"));		
			displayImage(computerDice2,document.getElementById("imgComputerDice2"));
			}
			//else if the player's targetNumber is equal to 0, in which the player wins
			else if ((yourRequiredNumber - (yourDice1 + yourDice2)) == 0){
				//disable the rollDice button
				document.getElementById("rollBtn").disabled = true;
				//enable the roll dice button for play to start
				document.getElementById("startBtn").disabled = false;
				//alert the winner
				document.getElementById("output").innerHTML = "YOU WIN THIS ROUND";
				gameCounter++;
				yourWinCount++;
				//increment gameCounter by 1 only after checking that the maximum number of games is not exceeded
				if (gameCounter == gameLimitInteger){
					if (yourWinCount > computerWinCount){
						document.getElementById("winnerText").innerHTML = "YOU WON THE GAME";
					} else if (yourWinCount < computerWinCount){
						document.getElementById("winnerText").innerHTML = "THE COMPUTER WON THE GAME";
					} else if (yourWinCount == computerWinCount){
						document.getElementById("winnerText").innerHTML = "ITS A DRAW";
					}
					document.getElementById("startBtn").disabled = true;
					gameCounter = 0;
				}
				document.getElementById("yourTally").innerHTML = yourWinCount;
				document.getElementById("computerTally").innerHTML = computerWinCount;
				console.log("Current Game Limit: " + gameLimitInteger);
				console.log("Current Game Counter: " + gameCounter);
				console.log("Current Your Win Counter: " + yourWinCount);
				console.log("Current Computer Win Counter: " + computerWinCount);
			}	
			//check if the computer's targetNumber after decrementing is greater than zero, in which case the decrementing is allowed
			if ((computerRequiredNumber - (computerDice1 + computerDice2)) > 0){
				computerRequiredNumber -= (computerDice1 + computerDice2);
			} 
			if (((yourRequiredNumber - (yourDice1 + yourDice2)) == 0) &&((computerRequiredNumber - (computerDice1 + computerDice2)) == 0)){
			//call the displayImage function to display appropriate dice images for the numbers generated
			displayImage(yourDice1,document.getElementById("imgYourDice1"));		
			displayImage(yourDice2,document.getElementById("imgYourDice2"));			
			displayImage(computerDice1,document.getElementById("imgComputerDice1"));		
			displayImage(computerDice2,document.getElementById("imgComputerDice2"));
			}
			//else if the computer's targetNumber is equal to 0, in which case he wins
			else if ((computerRequiredNumber - (computerDice1 + computerDice2)) == 0){
				//disable the rollDice button
				document.getElementById("rollBtn").disabled = true;
				//enable the roll dice button for play to start again
				document.getElementById("startBtn").disabled = false;
				//alert the winner
				document.getElementById("output").innerHTML = "COMPUTER WINS THIS ROUND";
				//increment gameCounter by 1 only after checking that the maximum number of games is not exceeded
				gameCounter++;
				computerWinCount++;
				if (gameCounter == gameLimitInteger){		
					if (yourWinCount > computerWinCount){
						document.getElementById("winnerText").innerHTML = "YOU WON THE GAME";
					} else if (yourWinCount < computerWinCount){
						document.getElementById("winnerText").innerHTML = "THE COMPUTER WON THE GAME";
					} else if (yourWinCount == computerWinCount){
						document.getElementById("winnerText").innerHTML = "ITS A DRAW";
					}
					document.getElementById("startBtn").disabled = true;
					gameCounter = 0;
				}//end check for game counter;
				document.getElementById("yourTally").innerHTML = yourWinCount;
				document.getElementById("computerTally").innerHTML = computerWinCount;
				console.log("Current Game Limit: " + gameLimitInteger);
				console.log("Current Game Counter: " + gameCounter);
				console.log("Current Your Win Counter: " + yourWinCount);
				console.log("Current Computer Win Counter: " + computerWinCount);
			}//end check for winner check	
		}//end if else last check	
		
		document.getElementById("yourDiceLabel").innerHTML = yourDice1 + yourDice2;
		document.getElementById("computerDiceLabel").innerHTML = computerDice1 + computerDice2;
		document.getElementById("yourScoreLabel").innerHTML = yourRequiredNumber;
		document.getElementById("computerScoreLabel").innerHTML = computerRequiredNumber;
		
}
//function that displays the appropriate image for each given value of dice generated
function displayImage(number,img){
	if (number == 1){
		if (img == document.getElementById("imgYourDice1")){
			document.getElementById("imgYourDice1").src = "img/1.png";
		} else if (img == document.getElementById("imgYourDice2")){
			document.getElementById("imgYourDice2").src = "img/1.png";
		} else if (img == document.getElementById("imgComputerDice1")){
			document.getElementById("imgComputerDice1").src = "img/1.png";
		} else if (img == document.getElementById("imgComputerDice2")){
			document.getElementById("imgComputerDice2").src = "img/1.png";
		}
	}//end check for 1
	else if (number == 2){
		if (img == document.getElementById("imgYourDice1")){
			document.getElementById("imgYourDice1").src = "img/2.png";
		} else if (img == document.getElementById("imgYourDice2")){
			document.getElementById("imgYourDice2").src = "img/2.png";
		} else if (img == document.getElementById("imgComputerDice1")){
			document.getElementById("imgComputerDice1").src = "img/2.png";
		} else if (img == document.getElementById("imgComputerDice2")){
			document.getElementById("imgComputerDice2").src = "img/2.png";
		}
	}//end check for 2
	else if (number == 3){
		if (img == document.getElementById("imgYourDice1")){
			document.getElementById("imgYourDice1").src = "img/3.png";
		} else if (img == document.getElementById("imgYourDice2")){
			document.getElementById("imgYourDice2").src = "img/3.png";
		} else if (img == document.getElementById("imgComputerDice1")){
			document.getElementById("imgComputerDice1").src = "img/3.png";
		} else if (img == document.getElementById("imgComputerDice2")){
			document.getElementById("imgComputerDice2").src = "img/3.png";
		}
	}//end check for 3
	else if (number == 4){
		if (img == document.getElementById("imgYourDice1")){
			document.getElementById("imgYourDice1").src = "img/4.png";
		} else if (img == document.getElementById("imgYourDice2")){
			document.getElementById("imgYourDice2").src = "img/4.png";
		} else if (img == document.getElementById("imgComputerDice1")){
			document.getElementById("imgComputerDice1").src = "img/4.png";
		} else if (img == document.getElementById("imgComputerDice2")){
			document.getElementById("imgComputerDice2").src = "img/4.png";
		}
	}//end check for 4
	else if (number == 5){
		if (img == document.getElementById("imgYourDice1")){
			document.getElementById("imgYourDice1").src = "img/5.png";
		} else if (img == document.getElementById("imgYourDice2")){
			document.getElementById("imgYourDice2").src = "img/5.png";
		} else if (img == document.getElementById("imgComputerDice1")){
			document.getElementById("imgComputerDice1").src = "img/5.png";
		} else if (img == document.getElementById("imgComputerDice2")){
			document.getElementById("imgComputerDice2").src = "img/5.png";
		}
	}//end check for 5
	else if (number == 6){
		if (img == document.getElementById("imgYourDice1")){
			document.getElementById("imgYourDice1").src = "img/6.png";
		} else if (img == document.getElementById("imgYourDice2")){
			document.getElementById("imgYourDice2").src = "img/6.png";
		} else if (img == document.getElementById("imgComputerDice1")){
			document.getElementById("imgComputerDice1").src = "img/6.png";
		} else if (img == document.getElementById("imgComputerDice2")){
			document.getElementById("imgComputerDice2").src = "img/6.png";
		}
	}//end check for 6 
	else if (number == 0){
		if (img == document.getElementById("imgYourDice2")){
			document.getElementById("imgYourDice2").src = "img/dice.jpg";		
		} else if (img == document.getElementById("imgComputerDice2")){
			document.getElementById("imgComputerDice2").src = "img/dice.jpg";
		}
	}//end check for 0
}

//set the gameLimit variable after validation
function setGameLimit(){
	var gameLimit = document.getElementById("gameLimit").value;	
	if ((gameLimitInteger = parseInt(gameLimit)) && (gameLimitInteger >= 1)){
		document.getElementById("gameLimitLabel").innerHTML = gameLimitInteger;
	} else {
		document.getElementById("errMsgLimit").innerHTML = "Invalid Entry!";
	}
	document.getElementById("gameLimitLabel").disabled = true;
}

//start disables the roll button and loads the event listeners for the roll, start and reset buttons into memory
function start(){
	document.getElementById("rollBtn").disabled = "true";
	document.getElementById("resetBtn").addEventListener("click",function(){location.reload();},false);
	document.getElementById("startBtn").addEventListener("click",playDM,false);
	document.getElementById("rollBtn").addEventListener("click",rollDice,false);
	document.getElementById("gameLimit").addEventListener("change",setGameLimit,false);
}//end function start


//event listener for the page load
window.addEventListener("load",start, false);